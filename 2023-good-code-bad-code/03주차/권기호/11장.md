# 단위 테스트의 실제

단위 테스트가 가져야할 특징은 다음과 같다.
- 코드의 문제를 정확하게 감지한다.
- 구현 세부 정보에 구애 받지 않는다.
- 실패는 잘 설명된다.
- 테스트 코드가 이해하기 쉽다.
- 테스트를 쉽고 빠르게 실행할 수 있다.

## 기능뿐만 아니라 동작을 시험하라.
테스트 대상 코드가 수행하는 작업이 여러 가지가 있으며 이 각각의 작업에 대해 TC를 따로 작성하라.

### 함수당 하나의 테스트 케이스만 있으면 적절하지 않을 때가 많다.
함수가 실패할 경우를 고려하면 여러 테스트 케이스가 나올 수 있다

### 해결책: 각 동작을 테스트하는 데 집중하라.
- 모든 동작이 테스트되었는지 확인하라.
- 오류 시나리오를 잊지 마라.

## 테스트만을 위해 퍼블릭을 만들지 말라.
프라이빗 함수 중 일부를 테스트 코드에서도 접근할 수 있도록 만들어 직접 테스트하고자 한다. 이는 좋은 생각이 아니다.

### 프라이빗 함수를 테스트하는 것은 바람직하지 않을때가 많다.

- 퍼블릭 API를 통해 테스트해라.
- 코드를 더 작은 단위로 분할하라.

## 한번에 하나의 동작만 테스트하라.
많은 경우에 각각의 동작을 테스트하려면 약간 다른 시나리오를 설정해야하므로, 각각의 시나리오는 그에 해당하는 뱔도이 테스트로 진행한다.
## 공유 설정을 적절하게 사용하라.
### 여러 동작을 한꺼번에 테스트하면 테스트가 제대로 안 될 수 있다.
코드를 이도적으로 변경할 때 그 변경으로 인해 어떤 동작이 영향을 받았고 어떤 동작이 영향을 받지 않았는지 알기 어렵다.

### 해결책: 각 동작은 자체 텟트 케이스에서 테스트하라.
잘 명명된 테스트 케이스를 사용하여 각 동작을 개별적ㅇ로 테스트해라.

### 매개변수를 이용한 테스트
테스트 케이스 함수를 한 번 작성한 다음 매개변수에 다른 값을 설정해 여러 시나리오를 테스트할 수 있다.
## 공유 설정을 적절하게 사용하라.
테스트 케이스의 의존성을 설정하기 위햐 시간과 노력이 상당히 많이 들고 리소스도 많이 필요하다. 
- 상태 공유
- 설정 공유

### 상태 공유는 문제가 될 수 있다.
- 해결책: 상태를 공유하지 않거나 초기화해라.

### 설정 공유는 문제가 될 수 있다.
- 중요한 설정은 테스트 케이스 내에서 정의하고 설정을 공유하는 것은 지양한다.

## 적절한 어서션 확인자를 사용하라.
어서션 확인자: 테스트 통과 여부를 최종적으로 결정하기 위한 테스트 케이스 내의 코드다.
- 부적합한 확인자는 테스트 실패를 잘 설명하지 못할 수 있다.
- 적절한 확인자를 사용하라.

## 스트 용이성을 위해 의존성 주입을 사용하라
- 하드코딩된 의존성은 테스트 자체를 불가능하게 만들 수도 있다.
  - 의존성 주입을 사용해 의존성에 대한 걱정을 덜자.

## 테스트에 대한 몇 가지 결론
- 통합 테스트, e2e 테스트, 회귀 테스트, 골든 테스트, 퍼즈 테스트 등 다양한 테스트를 고려해보자.
