# 다른 개발자와 코드 계약
코드의 중요한 세부 사항을 다른 개발자에게 전달하기 위한 여러 가지 기법에 대해 논의한다.

## 자신의 코드와 다른 개발자의 코드

요구사항이 변경되고 유지보수를 진행하고 다른 사람들과의 협업을 위해서는 코드가 튼튼하고 사용하기 쉬워야한다.

### 자신에게 분명하다고해서 다른 사람에게 분명한 것은 아니다.
자신의 로직에 너무 익숙하다고 해서 다른 사람에게 분명한 것은 아니다. 코드가 어떻게 사용되어야 하는지, 무엇을 하는지, 왜 그 일을 하는지에 대한 설명하는 것이 유용하다.

### 다른 개발자는 무의식중에 여러분의 코드를 망가뜨릴 수 있다.
코드는 독립적으로 존재하지 않는다.

코드 병합 전에 테스트를 통해 완화시킬 수 있다.

### 시간이 지나면 자신의 코드를 기억하지 못한다.
1년 후에 새로운 기능을 추가해야 하거나, 자신의 코드에서 발견된 버그를 해결해야 한다면 더 이상 기억 못할 수도 있다.

> 자신에게 당연한 것은 남들에게, 그리고 미래의 자신에게 당연하지 않을 수 있다.


## 여러분이 작성한 코드가 사용법을 다른 사람들은 어떻게 아는가?

우리가 작성한 코드가 무슨 일을 하는지 파악할 수 있어야 한다.

여러 방법들을 알아보자.
### 이름 확인
패키지, 클래스, 메서드의 이름을 통해 사용 방법을 확인할 수 있다.
작성자가 이름을 잘 짓는 것이 중요하다!
### 데이터 유형 확인
매우 유용하고 신뢰할만한 방법이다.

### 문서 읽기
매우 유용하지만 몇 가지 단점 존재한다.
- 실제로 안읽을 때가 많다.
- 잘못 해석할 가능성 존재
- 문서의 업데이트 부족 가능성 존재.

### 직접 물어보기
코드가 작성된지 얼마 안되었다면 매우 효과적인 방법이다. 

역시 단점 존재한다.
- 코드를 많이 작성할수록 질문에 답을 하는데 시간을 많이 소요해야한다.
- 공석일 경우, 물어볼 수 없다.
- 시간이 지나면 잊는다.

### 코드를 살펴보는 것
코드의 내부를 살펴보는 것이 가장 확실한 답을 얻을 수 있는 방법이다. 

단점)
- 코드의 양이 많다면 실용적이지 않다.
- 하위 의존성 코드가 존재한다면 시간이 더 소요된다.

## 코드 계약
코드의 계약에 의해 정의되면 분명한 부분이 많아지고 예상과 다르게 실행되는 경우도 적어진다.


- 선결 조건: 코드를 호출하기 전에 사실이어야 하는 것.
- 사후 조건: 코드가 호출된 후에 사실이어야 하는 것.
- 불변 사항: 코드가 호출되기 전과 후에 시스템 상태를 비교해서 변경되지 않아야하는 사항

### 계약의 세부 조항
명백한 부분과 세부 조항을 정확하게 나누어 작성한다.

명확한 부분: 함수와 클래스 이름, 인자 유형, 반환 유형, 검사 예외
세부 조항: 주석문과 문서, 비검사 예외

### 세부 조항에 너무 의존하지 말라
세부조항은 주석문의 형태로 작성되기 때문에 개발자가 안읽을 가능성이 높아 코드에 오용이 발생할 수 있다.

## 체크 및 어서션
컴파일 타임 체크보다는 약하지만, 런타임 검사를 통해 계약을 확인할 수 있다.

### 체크
코드 계약이 준수되었는지 확인하기 위한 추가적인 로직이며, 준수되지 않을 경우 실패를 유발한다.

- 전제 조건 검사: 일부 코드를 실행하기 전에 시스템이 유효한 상태인지 확인하는 경우
- 사후 상태 검사: 일부 코드를 실행한 후에 시스템이 유효한 상태인지 확인하는 경우
### 어서션
체크와 유사하지만, 배포를 위한 빌드할 때 컴파일에서 제외된다.

컴파일에서 제외되는 이유
- 성능 향상을 위해
- 코드 오류 발생률을 낮추기 위해