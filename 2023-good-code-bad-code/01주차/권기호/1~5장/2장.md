# 추상화 계층
하나의 큰 문제를 풀 때, 대부분 작은 하위 문제로 나눈다. 문제의 해결도 중요하지만, 해결할 코드를 어떻게 구성할 것인지도 중요하다.

코드의 구성을 담당하는 **추상화 계층** 설계를 2장에서 주로 다룬다.


# 널값 및 의사코드 규약
널은 값이 없다는 개념으로 매우 유용하면서도 동시에 많은 문제를 야기한다.

이 책에서는 널 안정성이 있다고 가정한다.

# 왜 추상화 계층을 만드는가?
문제가 복잡할지라도 하위 문제를 식별하고 올바른 상위 계층의 추상화 계층을 만듦으로써 복잡한 문제를 쉽게 다룰 수 있다.

## 장점

### 가독성
깨끗하고 뚜렷한 추상화 계층을 사용한다면, 한 두개의 계층으로 코드의 가독성이 크게 향상된다.

### 모듈화
추상화 계층과 하위 계층이 나뉘기 때문에, 코드 변경 시 다른 계층에 영향을 미치지 않고 계층 내에서만 구현을 변경하기가 쉬워진다.

### 재사용성 및 일반화성
하위 문제의 해결책이 추상화 계층으로 제시된다면 그 문제를 해결하기가 쉬워진다.

문제가 적절하게 세분화된다면, 여러 상황에서 사용할 수 있어 유용하게 일반화될 수 있다.

### 테스트 용이성
추상화 계층으로 분리되면 하위 문제에 대한 테스트를 완벽하게 하는 것이 쉬워진다.

# 코드의 계층
추상화 계층을 생성하는 방법은 서로 다른 단위로 분할하여 단위 간의 의존 그래프를 생성하는 것이다.

## API 및 구현 세부 사항
코드를 API 관점에서 생각하면 추상화 계층을 만드는 데 도움이 된다.

> API를 노출하는 코드

## 함수
함수를 더 작게 만들고 수행하는 작업을 명확하게 하여 코드의 가독성과 재사용성이 높아진다.

## 클래스
단일 클래스의 이상적인 크기에 대한 척도: 코드의 줄 수, 응집력, 관심사의 분리

> 클래스는 응집력이 있어야하고 한 가지 일에만 관심을 가져야 한다.

## 인터페이스
계층 사이를 뚜렷하게 구분하고 구현 세부 사항이 유출되지 않고, 외부 노출 함수를 인터페이스를 통해 결정할 수 있다.

### 인터페이스의 한 가지 구현

- 퍼블릭 API를 매우 명확하게 보여준다.
- 한 가지 구현만 필요하다고 잘못 추측할 수 있다.
- 테스트를 쉽게할 수 있다.
- 같은 클래스로 두 가지 하위 문제를 해결할 수 있다.


# 마이크로서비스
마이크로서비스에서는 시스템을 분리하여 모듈화를 할 수 있는 좋은 방법이다. 그렇다고해서 여러 하위 문제를 해결해야한다는 사실이 바꾸지는 않는다.

