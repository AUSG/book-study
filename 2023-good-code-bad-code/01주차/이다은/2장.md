- [Chapter 2. 추상화 계층](#chapter-2-추상화-계층)
  - [2.1 널값 및 의사코드 규약](#21-널값-및-의사코드-규약)
  - [2.2 왜 추상화 계층을 만드는가?](#22-왜-추상화-계층을-만드는가)
    - [2.2.1 추상화 계층 및 코드 품질의 핵심 요소](#221-추상화-계층-및-코드-품질의-핵심-요소)
  - [2.3 코드의 계층](#23-코드의-계층)
    - [2.3.1 API 및 구현 세부 사항](#231-api-및-구현-세부-사항)
    - [2.3.2 함수](#232-함수)
    - [2.3.3 클래스](#233-클래스)
    - [2.3.4 인터페이스](#234-인터페이스)
    - [2.3.5 층이 너무 얇아질 때](#235-층이-너무-얇아질-때)
  - [2.4 마이크로서비스는 어떤가?](#24-마이크로서비스는-어떤가)

<br/>
<br/>

# Chapter 2. 추상화 계층
- 코드를 잘 구성한다는 것은 간결한 추상화 계층을 만드는 것으로 귀결될 때가 많다.

## 2.1 널값 및 의사코드 규약
- null의 필요성에 대해서는 갑론을박이 많았다.
- 요즘은 null safety나 optional type을 지원하는 언어가 많이 생겼다.

<br/>

## 2.2 왜 추상화 계층을 만드는가?
- 하나의 문제에 대해 다양한 하위 문제에 대한 해결책이 일련의 층을 형성하고 있는 경우가 많다.
  - 이 경우에 그걸 사용하는 개발자는 하위 문제들에 관심을 쏟을 필요가 없어 그 문제를 간단한 문제로 받아들일 수 있다.
  - 상위 수준의 문제 / 알고 있어야 할 하위 문제 / 알 필요 없는 하위문제
- 문제가 복잡하더라도 하위 문제들을 식별하고 올바른 추상화 계층을 만듦으로써 그 복잡한 문제를 쉽게 다룰 수 있다.

### 2.2.1 추상화 계층 및 코드 품질의 핵심 요소
- 가독성
- 모듈화
- 재사용성 및 일반화성
- 테스트 용이성

<br/>

## 2.3 코드의 계층
- 추상화 계층을 생성하는 방법은 코드를 서로 다른 단위로 분할하여 단위 간의 의존 관계를 보여주는 의존성 그래프를 생성하는 것이다.
  - 함수, 클래스, 인터페이스 (+ 패키지, 네임스페이스, 모듈)

### 2.3.1 API 및 구현 세부 사항
- 코드를 호출할 때 (API) 구현 세부 사항은 볼 수 없다.
- 우리가 작성한 코드를 다른 코드들이 사용할 수 있도록 미니 API를 노출하는 것으로 생각하면 쉽다.
- API 관점에서 생각하면 추상화 계층을 명확하게 만드는 데 도움이 된다.

### 2.3.2 함수
- 각 함수에 포함된 코드가 하나의 잘 써진 문장처럼 읽히면 이상적이다.
  - 한 문장 안에 너무 많은 개념이 포함되면 알아 듣기 힘들다.
- 단일 업무 수행, 잘 명명된 다른 함수를 호출해서 더 복잡한 동작 구성을 만드는 것이 함수를 작성하기 위한 좋은 전략이 된다.
- 하위 문제로 나눠 별도의 함수로 구현한다. (더 작게, 더 작게!)

### 2.3.3 클래스
- 단일 클래스의 이상적인 모습
  - 300줄 이하의 줄 수
  - 강한 응집력
  - 관심사의 분리
- 저품질 코드의 근거 (거대한 클래스를 분리할지 판단하는 방법)
  - 낮은 가독성, 낮은 모듈화, 낮은 재사용성, 낮은 일반화성, 낮은 테스트 용이성
- 한 클래스가 너무 크고 너무 많은 개념을 처리하지 않도록 주의해야 한다.
- 각 하위 문제를 자체 클래스로 분할해 개선한다.
  - 의존성 주입을 용이하게 사용해볼 수 있다.

### 2.3.4 인터페이스
- 어떤 함수를 외부로 노출할 것인지 인터페이스를 통해 결정한다.
- 그 후 인터페이스에 정의된 대로 클래스가 해당 계층에 대한 코드를 구현한다.
- 인터페이스를 활용하면 주어진 하위 문제에 대해 서로 다른 구체적인 구현이 가능하다.
- 구현 클래스 사이에 전환이 필요할 때는 추상화 계층을 나타내는 인터페이스를 정의하는 것이 가장 좋다.
- 한 가지 구현만 있을 때 인터페이스를 통해 추상화 계층을 표현해야 하는가는 controversial한 영역이다.

### 2.3.5 층이 너무 얇아질 때
- 코드를 별개의 계층으로 세분화 할 때 추가적인 비용이 발생한다.
- 단일 계층으로 만들어도 될 것을 분해하면 불필요한 복잡성을 초래할 수 있기 때문에 코드 계층 규모를 올바르게 결정하는 게 중요하다.

<br/>

## 2.4 마이크로서비스는 어떤가?
- MSA에서는 개별 문제에 대한 해결책이 단지 단일 프로그램으로 컴파일되는 라이브러리 수준이 아니라 독립적으로 실행되는 서비스로 배포된다.
- 여전히 올바른 추상화 및 코드 계층을 만드는 게 중요하다.

