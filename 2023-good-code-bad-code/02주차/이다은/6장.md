- [Chapter 6. 예측 가능한 코드를 작성하라](#chapter-6-예측-가능한-코드를-작성하라)
  - [6.1 매직값을 반환하지 말아야 한다.](#61-매직값을-반환하지-말아야-한다)
  - [6.2 널 객체 패턴을 적절히 사용하라](#62-널-객체-패턴을-적절히-사용하라)
  - [6.3 예상치 못한 부수 효과를 피하라](#63-예상치-못한-부수-효과를-피하라)
  - [6.4 입력 매개변수를 수정하는 것에 주의하라](#64-입력-매개변수를-수정하는-것에-주의하라)
  - [6.5 오해를 일으키는 함수는 작성하지 말라](#65-오해를-일으키는-함수는-작성하지-말라)
  - [6.6 미래를 대비한 열거형 처리](#66-미래를-대비한-열거형-처리)
  - [6.7 이 모든 것을 테스트로 해결할 수는 없는가?](#67-이-모든-것을-테스트로-해결할-수는-없는가)

<br/><br/>

# Chapter 6. 예측 가능한 코드를 작성하라

## 6.1 매직값을 반환하지 말아야 한다.
**[왜?]**
- 매직값은 함수의 정상적인 반환 유형에 적합하지만 특별한 의미를 가지고 있다. (ex: -1)
  - 그렇기에 정상적인 반환값으로 오인하기 쉽다.
- 과거에 널 반환이나 옵셔널 타입 반환이 가능하지 않았을 때 매직값이 사용되었다.
- semantic error의 원인이 될 수 있다.

**[해결책]**
- 널, 옵셔널 or 오류를 반환한다.

**[주의할 점]**
- 의도하지 않아도 우연히 일어날 수도 있다.
  - 로직을 살펴보고 주의해야 한다.

<br/>

## 6.2 널 객체 패턴을 적절히 사용하라
- 값을 반환할 수 없을 때 널값이나 빈 옵셔널 대신 널 객체 패턴을 반환할 수 있다.
  - 유효한 값이 반환되어 그 이후 로직에 널로 인한 시스템 붕괴가 없기 때문
  - ex: "", []
- 빈 컬렉션을 반환하면 코드가 개선될 수 있다
  - ex: {}, [], ()
  - 반환값이 널값인지 확인할 필요가 사라져 코드가 간결해진다.
- 빈 문자열을 반환하는 것도 때로는 문제가 될 수 있다
  - 입력이 되었는지 여부의 구분이 필요할 땐 null을 사용해야 한다.
- 널 전용 인터페이스나 클래스를 정의하는 벙법도 있다.

<br/>

## 6.3 예상치 못한 부수 효과를 피하라
- 부수 효과: 어떤 함수의 호출이 함수 외부에 초래한 상태 변화

**[문제점]**
- 예상한 것보다 비용이 많이 들 수 있다.
- 호출한 쪽의 가정을 깨뜨려 버그를 일으킬 수 있다.
- 다중 스레드 환경에서 버그를 일으킬 수 있다.

**[해결책]**
- 부수 효과를 일으키지 않기 위해 적절성 여부를 깊이 따져 본다.
- 부수 효과가 발생한다면 그것을 분명히 드러낸다. (함수명 등으로)

<br/>

## 6.4 입력 매개변수를 수정하는 것에 주의하라
**[문제]**
- 입력 매개변수를 수정하는 것은 부수 효과의 일종이다.
- 대부분의 개발자는 입력 매개변수의 수정이 일어나지 않을 것이라고 예상하고 있다.

**[해결책]**
- 변경 전에 새 자료구조에 복사한다.
- 자원 관리 측면에서 꼭 변경해야 한다면 이를 분명히 표시한다.

<br/>

## 6.5 오해를 일으키는 함수는 작성하지 말라
**[문제]**
- ex: 함수가 nullable을 받아서 null인 경우 바로 리턴 해버리는 예외 처리

**[해결책]**
- 중요한 입력은 널을 허용하지 않는다.

<br/>

## 6.6 미래를 대비한 열거형 처리
**[문제]**
- 미래에 추가될 수 있는 열것값을 암묵적으로 처리하는 것은 문제가 될 수 있다.
  - ex: if문, default 케이스로 열거형 처리

**[해결책]**
- 모든 경우를 다 처리하는 스위치 문을 사용한다.

<br/>

## 6.7 이 모든 것을 테스트로 해결할 수는 없는가?
- 어차피 예상치 못한 케이스는 테스트에서 다 걸러질 거 아닌가?
  - 다소 이상주의적인 주장이다.
- 테스트 코드와 프로덕션 코드를 짤 때는 가능, 하지만 이게 유지된다는 보장은 없다.
- 어디까지나 개발자가 예상한 범위까지 테스트할 수 있다.
- 테스트하기 매우 여러운 것들도 있다. (멀티스레딩 관련 문제 등)