# Chapter 6. 예측 가능한 코드를 작성하라

-   매직값(ex. -1, “”)은 클라이언트의 편의 증진보다 error를 발생시키기 쉬움으로, 대신 null, optional, error를 반환하라.
-   caller 입장에서 empty collection과 null을 구분하는게 무용한 경우에는 empty collection을 반환함으로써 caller 측의 복잡성을 낮추는데 도움을 줄 수 있다.
    -   Q. 개념적으로 empty collection과 null을 구분하여 반환하는게 상위 집합이다. 그리고 코드의 통일성 및 callee는 caller를 모른다고 가정하고 개발되는게 프로세스상 이와 같은 방식이 옳다고 생각한다. 이와 같은 일관성 및 완결성을 깸에도 불구하고 empty collection을 활용하는게 좋을까? 이것도 일종의 매직값 아닐까?

-   부수효과를 수반하는 호출의 경우 함수명 등을 통해 이를 명확히 해야 호출자의 일반적 가정 및 다중 스레드 환경 등에 대응할 수 있다.
    -   ex) fun getPixel() 와 같은 읽기 함수의 경우 부수효과를 낸다고 클라이언트 측에서 예측하기 어려움으로 내부적으로 fun redraw()를 호출하는 경우 문제가 될 수 있다.

-   입력 매개변수를 수정하는 것 또한 일반적으로 기대되지 않는 부수효과다. deep copy 후 활용하자.
-   입력값이 함수의 호출에 중요한 경우, null을 허용하지 않음으로써 함수가 기대치 않게 동작하는 문제(ex. 입력값이 없으면 법률고지 팝업을 안띄우는 등)를 사전에 예방할 수 있다.
-   열것값은 미래에 언제든지 추가 될 수 있음으로 if 구문 보다는 compile time error가 발생하는 switch 문을 활용하자.
-   위와 같은 문제를 모두 테스트로 해결할 수는 없다. 왜냐하면 테스트는 결국 프로덕션 코드가 아니기 때문이다.
