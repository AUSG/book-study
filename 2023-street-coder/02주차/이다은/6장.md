# 6장. 조사를 통한 보안
- 보안에 미치는 영향에 관계 없이 코드의 신뢰성을 고려해보자.
- 위협 모델: 보안 측면에서 무엇이 잘못될 수 있는지를 명확히 이해하는 것
  - 목표: 수행해야 하는 보안 조치의 우선순위 설정, 비용 최적화, 효율성 극대화
- 모든 앱에 대해 위협 모델링을 하지는 않더라도 최소한의 보안 코드는 작성해야 한다. -> 소형 위협 모델 필요
  - 애플리케이션의 자산
  - 자산을 저장하는 서버
  - 정보 민감성
  - 리소스에 대한 액세스 경로

<br/>

- 보안 설계
  - 위협 모델 검토
  - 보안 유지비 파악
  - 보안 암호 저장 위치 결정 (모든 사용자가 소스 코드에 접근할 수 있다고 가정)
  - 최소한의 권한 부여
  - 이 원칙을 조직 전체에 적용 (CEO도 예외 없음)

<br/>

- 은둔 보안은 보안이 아니다. (숨기는 게 답이 아니다)
  - 트레이드오프 잘 고려해서 은둔 보안도 선택지에 둘 수 있다.
- 자신만의 보안을 구현하지 마라 (직접 해시 알고리즘 짜지 마라)
- SQL 삽입 문제를 해결하기 위해 매개변수화된 쿼리를 사용하라
- XSS 방어를 위해 특수 HTML 문자를 이스케이프 하도록 텍스트를 인코딩 하라
- DoS 공격 방어를 위해 캡차나 '5초 기다리세요' 같은 페이지를 쓰지 마라
  - 스로틀링, 로그인으로 대체
- 캐싱을 위해 딕셔너리를 사용할 때 사용자가 어떤 런타임을 사용하는지 공격자가 알면 해시 충돌 공격을 일으킬 수 있음 -> 복잡도 O(N)에 가까워짐 -> 뻗음
  - 프레임워크에서 제공하는 캐시 인프라 활용하기
- 암호를 올바른 스토리지에 저장하라
- 회원가입에서 꼭 필요한 데이터만 수집하라
- 비밀번호는 암호학적으로 안전하고 해시 함수를 여러 번 돌리는 알고리즘을 사용하라
- 비밀번호 문자열을 비교할 때 문자열이 틀린 시점이 노출되지 않도록 하라 (모든 문자가 검사된 후에 반환될 수 있도록 하라)
- 고정된 솔트를 사용하지 마라
- UUID는 완전 랜덤이 아니다. 하지만 하나씩 증가하는 정수보다는 안전하다.