# 11장 비용 고려 사항

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/c4383670-fed4-4d60-8ffe-1662f8104174/0564d766-db8e-4b86-9ba4-a6ee55894122/image.png)

## 비용 최적화 기법

- 데이터 센터, 콜센터, 워크스페이스 등 공유
- 업그레이드 연기 등

### 아키텍처 복잡성 감소

- 아키텍처 표준화를 통해서 비용 감소를 꾀할 수 있음
- 서비스 지향 아키텍처를 통해서 모듈식으로 접근

### IT 효율성 향상

- 라이선스 최적화
- 사용하지 않는 어플리케이션 삭제
- 레거시 시스템 현대화
- 재활용
- 데이터 통합
- 클라우드로의 전환
- 자동화 적용

### 표준화와 거버넌스 적용

- 계정 구조화
- 자원 태깅
  - 추후 태그를 통해서 검색, 추적 용이
- IaC

### 비용 사용과 보고서 모니터링

- 워크로드의 자원 사용률 자세히 파악
  - Splunk or CloudWatch 사용
- 시각화
- 예산 임계값 접근/초과시 알림 수신

## 퍼블릭 클라우드의 비용 최적화

- 자유도에 따른 더 강력한 규제와 제어가 필요
- 각 계정에 대한 서비스 / 사용량을 제한할 수 있음
- AWS Trust Advisor는 계정의 모든 자원을 탐색하고 비용 절감 제안해줌

# 12장 데브옵스와 솔루션 아키텍처 프레임워크

- DevOps: 제품이나 서비스를 지속적으로 제공하고자 개발자와 운영 팀 간의 협업과 조정을 촉진하는 방법론

## 데브옵스 소개

- 개발 엔지니어와 운영전문가가 긴밀하게 협업할 수 있도록 도움

## 데브옵스의 이점

- 데브옵스의 목표: 반복 가능성, 신뢰성, 안정성, 탄력성, 보안을 모두 갖춘 CI/CD 모델
- 더 빠른 개발 속도
- 신속한 배포
- 테스트를 통한 신뢰성
- 자동화 기반 확장성
- 협업
- 보안

## 데브옵스 구성요소 이해

- CI/CD
  - 완전 자동화
- 지속적인 모니터링과 개선
  - 변경량
  - 배포빈도
  - 개발에서 배포까지의 리드타임
  - 실패한 배포 비율
  - 가용성
  - 고객 불만 건 수
  - 사용자 수에 대한 백분율 변환
- 코드로서의 인프라 (IaC)
- 구성 관리(CM, Configuration Management)
  - 자동화를 사용해 전체 인프라, 애플리케이션에서 자원 구성을 표준화하는 프로세스
  - Chef, Puppet, Ansible 등의 CM 도구가 있음
  - Chef와 Puppet을 관리하기 위한 AWS OpsWorks

## 데브섹옵스 소개

- 데브옵스 전체 프로세스에서 애플리케이션 보안을 보장할 때 필요
- 보안은 나중이 아니라 기본!

## 데브섹옵스와 CI/CD 결합

- 각 서버에 할당된 올바른 액세스와 역할을 관리하고 젠킨스와 같은 빌드 서버가 보안 결함으로부터 보호되게 강화해 CI/CD 파이프라인 보안 보장
- 코드 단계 민감 정보 식별
- 빌드단계: 보안 아티팩트에 태그 지정
- 테스트: 테스트 보안이 표준 충족하는지 확인
- 배포,프로비저닝 단계: 파일 전송 중 파일의 유효성 검사
- 애플리케이션 보안 테스트 (AST, Application Security Testing)
  - 소프트웨어 애플리케이션 보안 취약점 스캔
  - 네가지 범주
    - 소프트웨어 복합 분석 (SCA, Software Composite Analysis)
      - 코드기반 오픈소스 관련 보안 평가
    - 정적 애플리케이션 보안 테스트 (SAST, Static Application Security Testing)
      - 코드 컴파일 전 애플리케이션 스캔 (화이트박스)
    - 동적 애플리케이션 보안 테스트 (DAST, Dynamic Application Security Testing)
      - 애플리케이션 실행 중 외부의 공격을 시뮬레이션 해서 보안 취약성 탐색(블랙박스)
    - 대화형 애플리케이션 보안 테스트(IAST, Interactive Application Security Testing)
      - 애플리케이션 기능을 검증하는 자동화된 테스트나 활동에 의해 앱이 실행되는 동안 보안 취약점에 대해 코드를 분석

## CD 전략 구현

- 인플레이스 배포
  - 기존 서버 집합에서 새 애플리케이션 배포
  - 가동 중지
- 롤링 배포
  - 서버 집합이 그룹으로 분할되어서 배포
  - 배포 절차중 이전 버전과 새버전이 공존
  - 가동 중지 시간을 줄임
- 블루-그린 배포
  - 구성이 같은 두개의 배포환경을 각각 블루/그린이라 하고 트래픽을 라우팅해서 배포
  - DNS 컷 오버 이용
  - 카나리 분석 가능 (점진적 배포)
  - 가동중지시간 0, 손쉬운 롤백
- 레드-블랙 배포 (다크 런치)
  - 선 카나리 테스트 이 초기테스트를 통과하면 시스템 배포 준비 된 것 으로 간주
  - 전환 준비 중 시스템의 새버전과 이전버전의 시스템이 동시에 유지
  - 새 버전은 레드, 구 버전은 블랙
- 불변 배포
  - 가동 중지시간 필요
  - 알 수 없는 종속성이 있는 경우 사용
  - IaC 도구를 주로 사용

## CI/CD 파이프라인에서 지속적인 테스트 구현

- 로컬에서 단위테스트 돌림
- 빌드 단계에서 정적 분석
- A/B 테스트

## CI/CD용 데브옵스 도구 사용

### 코드 편집기

- 환경 자동화를 위한 스크립트 편집용
- ACE편집기 혹은 클라우드 기반의 AWS Cloud9 IDE
- VSCode, 이클립스

### 소스코드 관리

- 호스팅 서비스: 깃허브, 빗버킷
- 클라우드 솔루션: AWS CodeCommit

### 지속적인 통합 서버

- CI 서버 == 빌드 서버
- 젠킨스
- AWS CodeBuild

### 코드 배포

- AWS CodeDeploy
- Chef, puppet
- 설정
  - OneAtATime: 인스턴스 그룹 중 한 번에 하나의 인스턴스에만 배포
  - HalfAtATime: 인스턴스 그룹 중 절반의 인스턴스에 배포. 프로덕션 환경에 적합
  - AllAtOnce: 모든 인스턴스는 배포 서비스를 폴링해 사용할 수 있는 최신 개정판이 있는 경우 배포. 테스트/개발 환경에 적합
  - 사용자 지정
- 배포 수명 주기 이벤트
  - ApplicationStop: 애플리케이션 서버 중지. 트래픽 받지 않음
  - DownloadBundle: 빌드파일 다운로드. 배포, 테스트 가능
  - BeforeInstall: 설정, 백업 사전 설치 단계
  - Install: 서버 애플리케이션 설치
  - AfterInstall: 로컬 메모리 설정 및 로그 매개변수 적용
  - ApplicationStart: 애플리케이션 시작. 성공 여부 알림
  - ValidateService: 유효성 검증

### 코드 파이프라인

- CD를 달성하고자 모든 것을 함께 오케스트레이션하는 것을 의미함
- AWS CodePipeline
- 작업의 범주와 공급자의 예
  - 소스
  - 빌드
  - 배포
  - 테스트
  - 호출
  - 승인

## 데브옵스 모범 사례 구현

- 고려할 것
  - 단계 수, 각 단계의 테스트 유형, 테스트 순서, 모니터링과 보고, 인프라 프로비저닝, 롤백
- Twelve-Factor App의 12가지 방법론

## 클라우드 기반의 데브옵스와 데브섹옵스 구축

- 각 파이프라인에 AST 도구 통합

# 13장 솔루션 아키텍처를 위한 데이터 엔지니어링

## 빅데이터 아키텍처

- 데이터 종류들: 서버로그, 클릭스트림 로그, 센서 데이터, 이미지와 동영상
- 워크플로 파이프라인
  1. 수집
  2. 저장
  3. 처리
  4. 분석
  5. 시각화

## 빅데이터 아키텍처 파이프라인

- 파이프라인을 설계할 때 다음 원칙 지키자
  - FLAIR
    - findability: 찾기 가능성. 데이터 뿐만 아니라 메타데이터도 확인할 수 있도록
    - lineage: 계보. 데이터 출처부터 소비까지 이해 및 시각화
    - accessibility: 접근성. 권한을 기반으로 한 접근
    - interoperability: 상호운용성. 전부까진 아니더라도 대부분의 내부 처리 시스템에서 액세스 할 수 있는 형식으로 저장
    - reusability: 재사용성. 알려진 스키마로 정의
- 도구 결정시 중요한 요소들
  - 데이터 구조
  - 허용 가능한 최대 지연시간
  - 최소 허용 처리량
  - 시스템 최종 사용자의 일반적인 액세스 패턴

## 데이터 수집

- 트랜잭션 데이터 스토리지: NoSQL, RDBMS
- 개별 파일 스토리지: FTP, API (단방향 전송)
- 스트림 데이터: 카프카, Fluentd 로 수집
- 클라우드에 데이터 수집 가능 (Direct Connect, Snowball, DMS, DataSync, Transfer 등)
- 클라우드에 데이터 저장
  - 관계형 DB
  - 데이터 웨어하우스
    - 열기반이 대세
  - NoSQL
    - 컬럼기반 DB (카산드라, HBase)
    - 도큐먼트 DB (몽고, 카우치베이스, 다이나모, 도큐먼트DB, 카산드라)
    - 그래프 DB (AWS 넵튠, JanusGraph, TinkerPop, Neo4j, GraphDB)
    - 인메모리 키-값 저장소 (레디스, 멤캐시드)
  - 검색 데이터 스토리지
    - ElasticSearch, Open Search
  - 비정형 데이터 스토리지 (하둡)
  - 오브젝트 스토리지
    - S3, 애저 블롭, 구글 스토리지
  - 블록체인 데이터 스토리지
    - 분산 검증
    - 변경사항을 저장할 중앙 집중식 원장 필요(Amazon QLDB)
    - 관리형 블록체인: AMB, R3 Corda, Ethereum, Hyperledger
  - 스트리밍 데이터 스토리지
    - 카프카, 플링크, 스파크 스트리밍, 삼자, 키네시스

## 데이터 분석과 수행

- 1차 수집된 결과를 기반으로 맵리듀스를 통해 데이터웨어하우스에 저장하고, 이걸 시각화하거나, 쿼리 가능하게 만들어야 함

## 데이터 시각화

- 결국에는 눈에 보여야 통찰력이 생긴다
- AWS 퀵사이트, 키바나, 태블로 등등

## 빅데이터 아키텍처 설계

- 최종사용자를 기준으로 역추적해서 페르소나를 만들어야 한다.
  1. 특정 사용자 페르소나 인식 및 분석
  2. 1번 페르소나가 해결하려는 비즈니스 사용사례 식별
  3. 액세스 패턴과 데이터 보존기한 고려 및 보안 준수
- 데이터레이크 아키텍처
  - 빅데이터나 머신러닝에서도 사용가능하도록 데이터를 오브젝트 스토리지에 저장하는 아키텍처
  - 아키텍처의 미래를 대비할 수 있는 장점이 있지만, 데이터 품질 및 보안 문제로 인한 관리의 어려움. 품질 저하
- 레이크 하우스 아키텍처
  - 데이터 레이크 만큼 데이터를 수집, 저장하고 SQL쿼리로 조회 쉽게 가능
  - 하지만 일정 조직 이상에서 사용하기에는 무리가 있음. 사업적으로 풀어내기 힘들다
- 데이터 메시 아키텍처
  - 여러 도메인의 데이터를 하나의 데이터 레이크에다 담지만, 각 도메인은 의도적으로 분산되어있음.
- 스트리밍 데이터 아키텍처
  - 대량의 실시간 데이터를 기반으로 연속 스트림을 처리해야 함
  - 팬아웃?

# 14장 머신러닝 아키텍처

- 절대적인 데이터가 너무 많아서 사람이 분별하기가 힘들 떄 사용
- 예측 정비, 수요 예측, 사기 탐지, 신용 리스크 예측, 문서에서 데이터 추출과 분석, 개인 맞춤화 추천, 이탈 예측

## 데이터 과학과 ML 관련 작업

- ML모델을 구축하기 위한 과정
  1. 데이터 준비
  2. 전처리
  3. 학습
  4. 평가
  5. 예측

### 과적합, 과소적합

- 과적합 모델: 트레이닝 세트에서 잘 수행되지만, 테스트 세트에서는 잘 수행되지 않는 모델
  - 노이즈가 많을 수 있음
- 과소적합 모델: 모델이 트레이닝 데이터 세트에 필수 규칙을 탐지하지 못함
  - 너무 단순하거나 설명 변수가 너무 적은 경우

### 지도 및 비지도 머신러닝 알고리즘

- 지도학습: 예제가 주어짐
- 비지도학습: 데이터간 관계를 직접 찾아내야 함
- 종류
  - 선형 회귀
  - 로지스틱 회귀
  - 신경망
  - k-최근접 이웃
  - 서포트 벡터 머신

## 머신러닝 아키텍처 설계

- AWS SageMaker
- 해야할 것
  - 데이터 처리 워크플로
  - 레이블링
    - 자동화 가능
  - 알고리즘 선택과 빌드
  - 트레이닝 및 모델 튜닝
    - 모델 디버깅 가능해야 함
  - 배포와 관리
    - 개념 드리프트: 예측을 하는데 사용되는 데이터가 모델을 훈련하는데 사용되는 데이터와 다른 경우

## MLOps

- 원칙
  - 자동화
  - 버저닝
  - 테스팅
  - 재현성
  - 배포
  - 모니터링

## 딥러닝

- 레이블링 필요없이 인간의 뇌를 모방해서 학습

# 15장 사물인터넷 아키텍처

## IoT 아키텍처 구성요소

1. IoT 디바이스 소프트웨어 관리
   - 마이크로 컨트롤러 유닛
2. IoT 디바이스 연결과 제어 처리
   - 대규모 데이터를 안전하기 처리하는 방법
     - ID 서비스
     - 디바이스 게이트 웨이
     - 메시지 브로커
     - 룰 엔진
     - 디바이스 섀도우
     - 디바이스 레지스트리
3. IoT 분석 서비스 수행
   - 커넥티드 팩토리 IoT 아키텍처: 산업용
   - 디지털 트윈 구현
     - AR/VR을 이용해 물리적 기계의 복제품을 생성함

# 16장 양자 컴퓨팅

## 양자 컴퓨팅의 빌딩 블록

- 큐비트
  - 기본 구성요소
  - 1과 0사이의 위치를 여러가지 가질 수 있음
- 중첩 및 얽힘과 같은 양자 물리학의 동작을 이용함

## 양자컴퓨팅 계산 방법

- 모든 것이 병렬처리 되는건 아님
  - 얽힘을 통해서 서로 영향을 주는 것일 뿐
- 여러가지 게이트를 통해서 계산함
