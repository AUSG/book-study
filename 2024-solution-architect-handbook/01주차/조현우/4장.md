## 솔루션 아키텍처 설계 원칙
#### 워크로드 확장
- 확장의 패턴
    - 예측확장
        - 이전 트래픽 히스토리를 통해 예상하여 확장하는 것.
        - 예) 블랙프라이데이 때는 평소보다 100배의 트래픽이 들어온다.
    - 예측 오토스케일링
        - 예측 알고리즘을 통해 과거 데이터를 기반으로 추세를 분석해 자동으로 확장하도록 구성하는 것
    - 사후 대응적인 확장
        - 위의 예시와 같이 어떤 이벤트를 **최초**로 실행하는 경우에 필요할 수 있음
        - 트래픽 흐름을 분석해, 워크로드가 쏠리는 아키텍처를 오프로드하는 게 중요
            - 로드밸런서 사용
            - 수평적 확장
            - CDN

#### 탄력적인 아키텍처 구축
- 탄력적인 아키텍처: 고객이 애플리케이션을 사용할 수 있으면서도 동시에 장애로부터 복구가 가능해야 함
- 장애에 대응하기 위한 설계를 구현하려면 애플리케이션 가용성에 영향을 미치는 모든 계층에 복구 가능한 아키텍처를 고려해야 한다.
    - DNS 서버 사용해 서로 다른 물리적 위치 간에 트래픽 라우팅
    - CDN 사용해 DDoS 공격이나 로컬 PoP 오류로 부터 장애 방지
    - 로드밸런서 사용해 트래픽 라우팅
    - 오토스케일링 사용해 트래픽에 따라 서버 확장
    - 스탠바이 데이터베이스 생성해 데이터베이스 고가용성 확보
- 한곳의 장애가 연쇄적으로 장애를 일으키는 캐스케이드 오류를 방지하는 게 중요한데 이에 대해선 [[Chapter6. 솔루션 아키텍처 설계 패턴]]에서 자세하게

#### 성능을 위한 설계
- 사용자를 불러들이고, 수익 증가를 위해선 성능을 챙기는 것도 중요하다.

> [!tldr] 캐시 또 캐시
> 책에서 `더 높은 성능을 달성하려면 아키텍처 설계의 모든 계층에 캐싱을 적용하기 바란다`라고 하는데, 캐시가 답인 거 마냥 이야기하는 것엔 동의하기 어렵다. 좀 더 자세하게 여러 케이스를 설명해줬으면 좋았을 듯..
> 캐시 일관성 문제, Stampede 문제 등에 대한 트레이드오프에 대해선 설명안해줘서 아쉽


#### 교체 가능한 자원 사용
##### 불변의 인프라 구축
- 불변의 인프라: 애플리케이션을 업그레이드하는 동안 소프트웨어뿐만 아니라 하드웨어도 교체한다는 의미
##### 카나리 테스트
- 롤링 배포 전략

#### 느슨한 결합
- 오류가 다른 서버로 전파되는 걸 최소화하기 위해 느슨한 결합을 사용하여 자동으로 장애나 확장 작업을 처리하도록 해야한다.
> [!question] 오류의 영향이 단일 인스턴스로만 제한된다
> 단일 인스턴스만 오류의 영향을 받는 경우보단 모든 인스턴스가 영향을 받는 게 더 많지않나? 어떤 경우에 단일 인스턴스만 영향을 받을까요? 경험이 궁금합니다.

- 큐 기반의 아키텍처

#### 요구 사항에 맞는 스토리지 사용
- 데이터 스토리지 선택에 고려해야할 요소
    - 내구성 요건
    - 데이터 가용성
    - 대기 시간 요건
    - 데이터 처리량
    - 데이터 크기
    - 데이터 부하
    - 데이터 무결성
    - 데이터 쿼리

#### 아키텍처 제약 사항 극복
- 모든 아키텍처에는 제약사항이 존재함
    - 비용
    - 시간
    - 예산
    - 범위
    - 일정
    - 자원
- 완전한 기능을 출시하는 것보다 속도가 더 중요할 때가 있음. 최소실행 가능 제품(MVP) 접근 방식도 좋다.

#### MVP 방식 채택
- MoSCoW
    - Mo: Must Have 매우 중요한 요구사항
    - S: Should Have 바람직한 요구
    - Co: Could Have 있으면 좋고, 없어도 괜찮은 것
    - W: Won't Have 없어도 모르는 것


#### 자동화 적용
- 자동화할 수 있는 구성요소
    - 애플리케이션 테스트
    - IT 인프라
    - 로깅, 모니터링, 경고
    - 배포 자동화
    - 보안 자동화
