## 2. 소프트웨어 아키텍처

소프트웨어 아키텍처란?

- 시스템 설계에 관하고 시스템 품질에 미치는 영향과도 관련이 있다.
- 아키텍처 설계는 상대적으로 더 잘동작하는 부분을 찾는 과정이다.
- 아키텍처 설계 접근법에는 아래와 같은 방식이 있다.
    - 아키텍처 무관 설계 : 기존의 방식을 채택하여 설계에 많은 시간을 쓰지 않는다.
    - 아키텍처 집중 설계 : 시스템의 목표와 호환하는 아키텍처를 의도적으로 선택한다.
    - 아키텍처 상향 설계 : 시스템의 목표나 속성을 보장할 수 있도록 아키텍처를 설계한다.

### 개요

- 아키텍처 및 상세 설계 : 설계 = 소프트웨어 아키텍처 + 상세 설계
    - 소프트웨어 아키텍처는 - 컴포넌트 조합의 시스템 구성, 글로벌 제어 구조, 물리적 배포 및 스케일링, 진화의 차원, 설계 대안 등이 포함된다.
- 정의 : 컴퓨터 시스템의 소프트웨어 아키텍처는 시스템에 추론하는 데 필요한 구조의 집합으로 소프트웨어 요소, 이들 간에 관계 그리고 이 둘의 속성으로 구성된다.
    - 구조의 집합이다.
    - 시스템의 대한 완전한 모델이 없어도 추론할 수 있는 것
- 아키텍처의 범위?
    - 모듈과 모듈간 연결 방식 - 거시적 부분이라고 말하는 것이 더 간단하다.
    - 상계 설계는 아키텍처가 아닌 모든 것이다.
    - 전반적으로 품질에 영향을 미치는 것도 이에 포함된다.
- 의도 : 아키텍처에서는 높은 수준부터 낮은 수준의 여러 의도(intentionality)가 존재할 수 있있는데 그 중 일부는 불완전할 수 있다. 하지만 이 또한 결과적으로 시스템 전반적으로 높은 품질을 달성하는데 중요한 것이라면 아키텍처와 관련이 있을 수 있다고 생각할 수 있다.

### 소프트웨어 아키텍처가 중요한 이유

- 시스템의 골격 역할을 한다.
    - skeleton 역할을 하는데 이는 서비스의 목적을 달성하는데 매우 중요하다.
    - 소스코드상 보이지 않는 여러가지 부분도 아키텍처로 볼 수 있다. (메모리, 잠금 정책 등)
- 품질 속성에 영향을 미친다.
    - 보안, 성능, 처리량 등 비기능 적인 요구사항을 달성하는데 아키텍처는 많은 부분 관여한다.
- 기능과 직교한다.
    - 아키텍처는 기능과 직교하지만 기능을 만드는데 영향을 미치므로 적절한 아키텍처를 잘 선택해야한다.
- 시스템을 제한한다.
    - 아키텍처의 제약은 가이드레일 역할을 하며 목표로 하는 작업을 잘 수행하고 시간이 지나더라도 잘 유지할 수 있는 시스템을 만드는데 필수적이다.
- 시스템이 하지 않는 일을 시스템이 하는 일 만큼 중요하다.
    - 자발적 설계 제약은 성능, 보안 품질 등을 향상시킬 수 있다.
    - 적절한 제약 조건을 사용하면 오는 이점
        - 판단을 구체화한다. 지식의 전달 없이도 다른 엔지니어가 수용 가능한 해결책을 만들 수 있도록 만든다.
        - 개념적 무결성을 장려한다.
        - 복잡성을 줄인다.
        - 런타임 동작을 이해한다.

### 중요한 상황은?

- 규모가 크거나 복잡도가 높은 시스템에서는 아키텍처에 더 많은 시간을 할애해야 할 수 있다.
    - 선택할 수 있는 해결 책이 적은 경우
    - 높은 실패 리스크
    - 어려운 품질 속성
    - 새로운 도메인
    - 제품 라인
- **아키텍처를 잘못 만들면 얼마나 나쁜 영향이 미칠지 살펴보는 것**

### 추정 아키텍처

- 추정 아키텍처 = 지배적인 아키텍처군
    - 이를 선택하지 않은 경우는 왜 그렇게 선택했는지를 설명해야한다.
- 추정 아키텍처는 레퍼런스 아키텍처와 유사하다.

### 소프트웨어 아키텍처 사용법

- 아키텍처 무관 설계 - 큰 진흙 뭉치가 될 수도 있고 혹은 뚜렷한 아키텍처로 나타낼 수 있다. 추정 아키텍처를 사용할 수도 있다.
    - 개발자가 시스템 아키텍처에 대해서 인식하지 못하는 상태
    - 적절한 아키텍처를 선택할 기회가 지나갔다는 의미
    - 복잡성을 높인다.
- 아키텍처 집중 설계 - 적합한 아키텍처를 설계한다.
    - 어떤 소프트웨어 아키텍처가 시스템에 적절한지 판단하고 시스템의 목표를 달성할 수 있는 아키텍처를 의도적으로 선택한다.
- 아키텍처 상향 설계 - 시스템의 목표나 속성을 달성하기 위해 설계하는 일종의 아키텍처 집중설계이다.
    - 더 엄격한 아키텍처 집중 설계다.
    - 시스템의 목표나 속성을 보장하는 아키텍처를 설계한다.
    - 아키텍처 집중 설계와 다르게 해당 속성이나 목표를 보장하기 위해서 다양한 시나리오에 대한 코드 외적인 대비(구조적 제약)도 포함된다.
    - 개발자에게 일종의 폭정으로 볼 수 있다. 추가 제약과 관료주의로 부담을 더하기도 한다.

### 대규모 조직에서의 아키텍처

- 엔터프라이즈 아키텍트
    - 많은 애플리케이션을 담당하는 개발자다.
    - 전체 기업에 기여하도록 하는 에코시스템을 설계한다.
- 어플리케이션 아키텍트
    - 단일 애플리케이션을 담당하는 개발자
    - 수천 개의 객체를 이해하고 관리할 수 있다.