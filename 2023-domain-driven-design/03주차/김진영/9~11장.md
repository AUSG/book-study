## 9장 암시적인 개념을 명확하게

-   심층 모델로 향하는 첫걸음은 일단 도메인의 본질적인 개념을 모델 내에 표현하는 것이다.

-   개념 파헤치기

    -   언어에 귀 기울여라
        -   도메인 전문가가 사용하는 언어에 귀 기울여라. 복잡하게 뒤얽힌 개념들을 간결하게 표현하는 용어가 있는가? 여러분이 선택한 단어를 (아마도 더 적절하게) 고쳐주는가? 여러분이 특정 문구를 이야기할 때 도메인 전문가의 얼굴에서 곤혹스러운 표정이 사라지는가? 이 모두가 바로 모델에 기여하는 개념의 실마리에 해당한다.
        -   사용자나 도메인 전문가가 설계상의 어디에도 표현돼 있지 않은 어휘를 사용하고 있다면 그것은 곧 경고 신호다. 개발자와 도메인 전문가가 설계상에 표현돼 있지 않은 어휘를 사용하고 있다면 그것은 더욱 더 위험한 경고다.

    -   어색한 부분을 조사하라
    -   모순점에 대해 깊이 고민하라
    -   서적을 참고하라
    -   시도하고 또 시도하라

-   다소 불명확한 개념을 모델링하는 법

    -   명시적인 제약조건
        -   어떤 제약조건을 포함한 객체의 설계가 어딘가 잘못돼 있음을 나타내는 조짐들
            -   제약조건을 평가하려면 해당 객체의 정의에 적합하지 않은 데이터가 펼요하다.
            -   관련된 규칙이 여러 객체에 걸쳐 나타나며, 동일한 계층구조에 속하지 않는 객체 간에 중복 또는 상속 관계를 강요한다.
            -   설계와 요구사항에 관한 다양한 논의는 제약조건에 초점을 맞춰 이뤄지지만 정작 구현 단계에서는 절차적인 코드에 묻혀 명시적으로 표현되지 않는다.

    -   도메인 객체로서의 프로세 스
        -   **명시적으로 표현해야 할 프로세스와 숨겨야 할 프로세스를 구분하는 비결은 간단하다. 이것이 바로 도메인 전문가가 이야기하고 있는 프로세스인가? 아니면 단순히 컴퓨터 프로그램상의 메커니즘의 일부일 뿐인가?**

-   SPECIFICATION

    -   종종 업무 규칙이 ENTITY나 VALUE OBJECT가 맡고 있는 책임에 맞지 않고 규칙의 다양성과 조합이 도메인 객체의 기본 의미를 압도할 때가 있다. 그렇다고 규칙을 도메인 계층으로부터 분리한다면 도메인 코드가 더는 모델을 표현할 수 없어서 상황이 더 악화된다.
    -   특별한 목적을 위해 술어와 유사한 명시적인 VALUE OBJECT를 만들어라. SPECIFICATION은 어떤 객체가 특정 기준을 만족하는지 판단하는 술어다.
    -   SPECIFICATION의 적용과 구현
        -   주된 사용 사례
            -   객체가 어떤 요건을 충족시키거나 특정 목적으로 사용할 수 있는지 가늠하고자 객체를 검증
            -   컬렉션 내의 객체를 선택(이를테면, 기한이 만료된 송장 목록을 조회)
            -   특정한 요구사항을 만족하는 새로운 객체의 생성을 명시


      

## 10장 유연한 설계

![image](https://github.com/gimquokka/freelec-springboot2-webservice/assets/60743304/a50954b1-f07e-4df2-a171-11b71d446efc)

- INTENTION-REVEALING INTERFACE

  - 개발자가 컴포넌트를 사용하기 위해 컴포넌트의 구현 세부사항을 고려해야 한다면 캡슐화의 가치는 사라진다. 원래의 개발자가 아닌 다른 개발자가 구현 내용을 토대로 객체나 연산의 목적 을 추측해야 한다면 새로운 개발자는 우연에 맡긴 채 연산이나 클래스의 목적을 짐작할 가능성이 었다. 추측한 바가 원래의 취지에 어긋난다면 당장은 코드가 정상적으로 동작했다고 하더라 도 설계의 개념적 기반은 무너지고 두 개발자는 서로 의도가 어긋난 상태로 일하게 된다.
  - 수행 방법에 관해서는 언급하지 말고 결과와 목적만을 표현하도록 클래스와 연산의 이름을 부 여하라. 이렇게 하면 클라이언트 개발자가 내부를 이해해야 할 필요성이 줄어든다. 이름은 팀원들이 그 의미를 쉽게 추측할 수 있게 UBIQUITOUS LANGUAGE에 포함된 용어를 따라야 한다. 클라이언트 개발자의 관점에서 생각하기 위해 클래스와 연산을 추가하기 전에 행위에 대한 테스트를 먼저 작성하라.

- SIDE-EFFECT-FREE FUNCTION

  - 다수의 규칙에 따라 상호작용하거나 여러 가지 계산을 조합하면 극도로 예측하기가 어려워진다. 연산을 호출하는 개발자가 결과를 예상하려면 연산 자체의 구현뿐 아니라 연산이 호출하는 다른 연산의 구현도 이해해야 한다. 개발자가 베일에 가려진 구현과 관련된 세부사항도 함께 이해해야 한다변 인터페이스 추상화로 얻을 수 있는 유용성이 제한된다. 안전하게 예측할 수 있는 추상화가 마련돼 있지 않다면 개발자가 연산을 조합해서 사용하는 데 제약이 따르며, 따라서 행위를 풍부하게 할 수 있는 가능성이 낮아진다.
  - 가능한 한 많은 양의 프로그램 로직을 관찰 가능한 부수효과 없이 결과를 반환하는 함수 안에 작성하라. 명령(관찰 가능한 상태를 변경하는 메서드)을 도메인 정보를 반환하지 않는 아주 단순한 연산으로 엄격하게 분리하라. 한 걸음 더 나아가 책임에 적합한 어떤 개념이 나타난다면 복잡한 로직을 VALUE OBJECT로 옮겨서 부수효과를 통제하라.

- ASSERTION

  - 연산의 부수효과가 단지 구현에 의해서만 함축적으로 정의될 때 다수의 위임(delegation)을 포함하는 설계는 인과 관계로 혼란스러워진다. 프로그랩을 이해하려면 분기 경로(branching path)를 따라 실행 경로를 추적하는 수밖에 없다. 이렇게 되면 캡슐화의 가치가 사라지고, 구체적인 실행 경로를 추적해야 한다는 펼요성으로 추상화가 무의미해진다.
  - 연산의 사후조건과 클래스 및 AGGREGATE의 불변식을 명시하라. 프로그래밍 언어를 사용해서 프로그램에 직접 ASSERTION 을 명시할 수 없다면 자동화된 단위 태스트를 작성해 서 ASSERTION의 내용을 표현하라. (개인적으로 이건 좀 별루인 듯) 프로젝트에서 사용 중인 개발 프로세스의 형식에 맞는 적절한 문서나 다이어그랩으로 ASSERTION을 서술하라.
  - 개발자들이 의도된 ASSERTION 을 추측할 수 있게 인도하고, 쉽게 배울 수 았고 모순된 코드를 작성하는 위험을 줄이는 응집도 높은 개념이 포함된 모텔을 만들려고 노력하라.

- CONCEPTUAL CONTOUR

  - 도메인을 중요 영역을 나누는 것과 관련한 직관을 감안해서 설계 요소(연산, 인터페이스, 클래스 , AGGREGATE)를 응집력 있는 단위로 분해하라. 계속적인 리팩터령을 토대로 변경되는 부분과 변경되지 않는 부분을 나누는 중심 축을 식별하고, 변경을 분리하기 위한 패턴을 명확하게 표현하는 CONCEPTUAL CONTOUR를 찾아라. 우선적으로 확실한 지식 영역을 구성하는 도메인의 일관성 있는 측면과 모텔을 조화시켜라.

- STANDALONE CLASS

  - 클래스의 결합도를 낮게 유지하기 위해 노력하라

- CLOSURE OF OPERATION

  - 닫힌 연산은 부차적인 개념의 도입 없이 고수준의 인터페이스를 제공한다.

- 선언적인 형식의 설계

  - SPECIFICATION을 선언적인 형식으로 확장하기

    ![image](https://github.com/gimquokka/freelec-springboot2-webservice/assets/60743304/6daab612-c556-4231-a9e4-39dff3e858e0)

- 받음각

  - 하위 도메인으로 분할하라
  - 가능하다면 정립된 정형화를 활용하라
    - 각종 도메인의 어딘가에는 수학적인 개념이 존재한다. 찾아라. 그리고 파헤쳐라. 도메인에 적절히 특화된 수학은 깔끔한 동시에 명확한 규칙과 결합할 수 있어서 사람들이 이해하기도 쉽다.
  - 암시적인 개념을 명확하게 만들기

## 11장 분석 패턴의 적용

-   분석 패턴은 업무 모델링 과정에서 발견되는 공통적인 구조를 표현하는 개념의 집합이다. 분석 패턴은 단 하나의 도메인에 대해서만 적절할 수도 있고 여러 도메인에 걸쳐 적용이 가능할 수도 있다.
-   운 좋게 적용 가능한 분석 패턴을 알고 있더라도 분석 패턴이 현재의 특정 요구사항에 딱 들어 맞는 경우는 거의 없다. 그럼에도 분석 패턴은 도메인을 파악하는 과정에서 훌륭한 길잡이 역할을 하며 깔끔하게 추상화된 어휘집을 제공한다. 이뿐만 아니라 구현할 때 고려해야 할 영향력에 대한 지침을 제공함으로써 장차 겪게 될 고통을 덜어주기도 한다.
