# 15장 디스틸레이션

혼합된 요소를 분리해서 본질은 좀 더 값지고 유용한 형태로 뽑아내는 과정



## CORE DOMAIN

-   디스틸레이션은 결국 CORE DOMAIN을 찾아나가는 과정

-   애플리케이션의 설계하는 목적들 중 특이하고 목적의 중요성을 강조하는 모델들을 Core Domain을 구성한다.
-   모델을 요약하라.
-   Core Domain을 찾아 그것을 지원하는 다수의 모델과 코드로 부터 쉽게 구별하수 있는 수단을 제공하고, 가장 가치있고 전문화된 개념을 부각시켜라.
-   CORE를 작게 만들어라.



## GENERIC SUBDOMAIN

-   모델의 일부는 전문 지식을 포착하거나 전달하지 않고 복잡성을 더하곤 한다.
-   부수적인 요소는 CORE DOMAIN을 식별하고 이를 이해하는 일을 더욱 어렵게 한다.
-   현재 진행 중인 프로젝트를 위한 것이 아닌 응집력 있는 하위 도메인을 식별하라.



## DOMAIN VISION STATEMENT

-   CORE DOMAIN을 짧게 기술하고 그것이 가져올 가치에 대한 가치 제안을 작성하라
-   도메인 모델을 구별하는데 도움이 되지 않는 측면을 모두 무시하라.
-   도메인 모델이 어떻게 다양한 관심사를 충족하고 균형을 이루는지 보여라.
-   한정된 범위에서 내용을 유지하라. 초기에 이 선언문을 작성하고 새로운 통찰력을 얻을 때마다 선언문을 개정하라.



## HILIGHTED CORE

-   팀원들이 대체로 무엇이 CORE DOMAIN을 구성하는지 안다고 해도 사람들은 제각기 아주 유사한 구성요소를 고르지는 않을 테고 같은 사람이라도 이틀 연속으로 일관되게 선택하지는 못할 것이다.
-   코드에 현저한 구조적 변경을 가하는 것이 CORE DOMAIN을 식별하는 이상적인 방법이겠지만, 그러한 구조적 변경이 단기간에도 실용적인 것은 아니다.
-   CORE DOMAIN과 CORE의 구성요소 사이에서 일어나느 상호작용을 기술하는 매우 간결한 문서를 작성하라.
    -   문서가 관리되지 않고, 아무도 읽지 않으며, 정보의 출처가 늘어나면서 위험이 생길 수는 있다.
    -   그렇기에 최소주의를 지향하라.



## COHESIVE MECHANISM

-   개념적으로 COHESIVE MECHANISM을 별도의 경량 프레임워크로 분할하라.
-   특히 형식주의나 잘 문서화된 알고리즘에 촉각을 곤두세워라.
-   INTENTION-REVEALING INTERFACE로 프레임워크의 기능을 노출하라.
-   이제 도메인의 다른 요소들은 해법의 복잡성을 프레임워크에 위임에 문제를 표현하는데 집중할 수 있다.



## SEGREGATED CORE

-   보조적인 역할로부터 CORE의 개념을 분리되게끔 모델을 리팩토링하고 CORE와 다른 코드와의 결합은 줄이면서 CORE의 응집력은 강화하라.
-   일반적이거나 보조적인 역할을 하는 구성요소를 다른 객체로 추출해서 다른 패키지에 배치하라



##  ABSTRACT CORE

-   별도 MODULE의 하위 도메인 간에 상호작용이 활발한 경우 MODULE 간에 참조가 많이 만들어져야해서 분할의 가치가 상당 수 사라지거나 또는 상호작용이 간접적으로 일어나야해서 모델이 불분명해질 것이다.
-   모델의 가장 근본적인 개념을 식별해서 그것을 별도의 클래스나 추상 클래스, 또는 인터페이스로 추출하라.



# 16장 대규모 구조



## EVOLVING ORDER

-   아무나 설계할 수 있다면 누구도 전체적으로 이해할 수 없는 시스템이 만들어지고, 이것은 결국 유지보수하기가 매우 어렵다.
-   대규모 구조가 애플리케이션과 함께 발전하도록 해서 발전 과정에서 전혀 다른 형식의 구조로도 변화할 수 있게 해야한다.



## SYSTEM METAPHOR

-   은유는 비유하고자 하는 대상의 본질을 깨닫는데 도움을 준다.
-   그러나 모든 은유는 부정확하므로 지속적으로 은유가 지나치거나 적절치 못한가를 재점검하고, 방해가 된다면 언제든 버릴 준비를 한다.



## RESPONSIBILITY LAYER

-   모델에 존재하는 개념적 의존성과 도메인의 여러 부분에 대한 다양한 변화율과 변화의 근거를 검토하라.
-   도메인에서 자연적인 층을 식별하면 그것을 광범위한 추상적 책임으로 간주하라.
-   이러한 책임은 시스템의 높은 수준에서의 목적과 설계에 관한 이야기를 들려줄 것이다.
-   AGGREGATE, MODULE과 같은 각 도메인 객체의 책임이 한 계층의 책임 안에서 말끔히 맞아떨어지도록 모델을 리팩터링하라.



## KNOWLEDGE LEVEL



## PLUGGABLE COMPONENT FRAMEWORK

-   인터페이스와  상호작용에 대한 ABSTRACT CORE를 정제하고 그러한 인터페이스의 다양한 구현이 자유롭게 대체될 수 있는 프레임워크를 만들어라.
-   컴포넌트가 ABSTRACT CORE의 인터페이스를  통해 정확히 작동하는 한 어떠한 어플리케이션에서도 그러한 컴포넌트를 사용할 수 있게 하라.



# 17장 전략의 종합



## 대규모 구조와 디스틸레이션과의 결합

-   대규모 구조는 CORE DOMAIN 안의 각종 관계와 여러 GENERIC SUBDOMAIN 사이의 관계를 설명하는데 도움될 수 있다.
-   대규모 구조 자체도 CORE DOMAIN의 중요한 부분일지도 모른다.



## 평가 먼저

1.   CONTEXT MAP을 그려라
2.   프로젝트 상의 언어를 쓰는 데 힘써라
3.   무엇이 중요한지 이해하라. CORE DOMAIN이 있는가? DOMAIN VISION STATEMENT가 존재하거나 작성할 수 있는가.
4.   프로젝트에 사용하는 기술이 MODEL-DRIVE-DESIGN에 유리한가?
5.   팀 내 개발자가 역량을 잘 갖췄는가
6.   개발자들이 도메인을 잘 알고 있는가? 개발자들이 도메인에 관심이 있는가?



## 기술 프레임워크도 마찬가지다

-   프레임워크는 애플리케이션이 기본적인 서비스의 구현에서 벗어나게 해주는 도움과 도메인 계층을 포함하는 애플리케이션 개발 속도를 향상 시킬 수 있다.
-   하지만 프레임워크와 아키텍처가 도메인 모델에 대한 표현력 있는 구현과 손쉬운 변경을 방해할 수 있다는 것도 명심하자.



>   멍청이를 위한 프레임워크를 작성하지마라.



## 종합 계획을 조심하라

-   전체적인 종합계획은 너무 경직되어 있고, 예측 불가능한 변화에 적응하기 힘들다.
-   결국 종합계획은 실패한다.



# 18장.  결론

-   어떠한 프로젝트에서도 이 책에 나와있는 모든 기법들을 사용할 수는 없다.
-   비록 그렇더라도 도메인 주도 설계에 전념하는 프로젝트는 몇 가지 방법으로 알아볼 수 있을 것이다.
-   좋은 소프트웨어를 만들어내는 것은 학습과 사고활동이라는 핵심적인 사실을 간과해서는 안된다.
