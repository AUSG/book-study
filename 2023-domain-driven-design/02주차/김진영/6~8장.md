## 6장 도메인 객체의 생명주기

-   AGGREGATE

    -   소유권과 경계를 명확히 정의함으로써 모델을 엄격하게 만들어 객체 간의 연관관계가 혼란스럽게 얽히지 않게 한다.
    -   경계 안의 객체는 서로 참조할 수 있지만, 경계 바깥의 객체는 해당 AGGREGATE의 구성요소 가운데 루트만 참조할 수 있다.

-   FACTORY

    -   복잡한 객체와 AGGREGATE를 생성하고 재구성함으로써 그것들의 내부 구조를 캡슐화할 수 있다.

-   REPOSITORY

    -   생명주기의 중간과 마지막을 다루며, 거대한 관련 인프라스트럭처를 캡슐화 하면서 영속 객체를 찾아 조회하는 수단을 제공함.
    -   실질적으로 직접 접근해야 하는 AGGREGATE의 루트에 대해서만 REPOSITORY를 제공
    -   모든 객체 저장과 접근은 REPOSITORY에 위임해서 클라이언트가 모델에 집중

-   DB가 주로 객체를 저장하는 저장소라면 점차 혼란스러워 질 수 있기 때문에 ENTITY와 DB TABLE 사이의 매핑은 투명해야 하고, 매핑 도구에 작성된 코드를 검사하거나 항목을 읽기만 해도 쉽게 이해 할 수 있어야 한다는 점이 중요하다.

    



## 7장 언어의 사용 ( 확장 예제 )

-   양방향 연관관계는 설계에서 문제를 일으킬 수 있다. 또한 탐색 방향은 종종 통찰력을 포착해서 도메인에 반영 함으로써 모델 자체를 심층적으로 만들기도 한다.
-   설계에는 AGGREGATE의 루트인 ENTITY가 5개 있으므로 고려해야 할 사항을 여기에 맞게 한정할 수 있다. 이는 ENTITY를 제외한 다른 객체는 REPOSITORY를 가질 수 없기 때문이다.
-   업무 규칙을 이행하는 것은 도메인의 책임이며 응용 계층에서 수행해서는 안 된다.

![image](https://github.com/shorebirdtech/shorebird/assets/60743304/ddb46bd2-0cd7-4c15-9895-e4ec402adf36)

## 8장 도약

-   리팩터링의 효과는 선형적으로 증가하지 않는다. 일반적으로 리팩터링에 들어간 노력의 양이 적다면 최소의 보답만이 돌아오며 개선되는 부분 역시 적을 수밖에 없다. 리팩터링은 엔트로피와의 싸움이며 레거시 시스템이 퇴보하는 것을 막는 최전선에 놓여 있다. 하지만 가장 중요한 통찰력은 어느 순간 갑자기 떠 오르고 그에 따른 충격은 프로젝트 전체로 퍼 져나간다.

![image](https://github.com/shorebirdtech/shorebird/assets/60743304/9da408d2-a616-4a26-b0f3-e3e31988f792)

