## 18장 웹 호스팅
> 웹 호스팅? 콘텐츠 리소스를 저장, 중개, 관리하는 일

### 호스팅 서비스
- 가상 호스팅
  - 많은 웹 호스팅 업자는 컴퓨터 한 대를 여러 고객이 공유하게 해서 저렴한 웹 호스팅 서비스를 제공 = 이를 공유 호스팅 혹은 가상 호스팅이라 부름
  - 각 웹사이트는 다른 서버에서 호스팅하는 것처럼 보이겠지만， 사실은 물리적으로 같은 서버에서 호스팅되는 것
  - 호스팅 업자는 복제 서버 더미(서버 팜이라 부르는)를 만들고 서버 팝에 부하를 분산할 수 있다.
    - 팜에 있는 각 서버는 다른 서버를 복제한 것이며， 수많은 가상 웹 사이트를 호스팅하고 있기 때문에 관리자는 훨씬 편해진다.
  - HTTP/1.0 설계 관련 결함
    - HTTP/1.0 명세는 공용 웹 서버가 호스팅하고 있는 가상 웹 사이트에 누가 접근하고 있는지 식별하는 기능을 제공하지 않음
    - 이는 각 웹 서버가 정확히 한 웹사이트만을 호스팅 할 것이라고 잘못 예측한 HTTP 명세의 실수
    - 문제 해결!
      - HTTP 요청 메세지에 경로 컴포넌트만 보내는 것이 아니라 완전한 URL도 포함시켜 보내게 만들었다
  - 나타난 4가지 기술
    - URL 경로를 통한 가상 호스팅
      - 좋지 않은 방법이라 거의 사용하지 않음
    - 포트번호를 통한 가상 호스팅
    - IP 주소를 통한 가상 호스팅
    - Host 헤더를 통한 가상 호스팅
  - HTTP/1.1 Host 헤더
    - Host 헤더는 RFC 2068에 정의되어있는 HTTP/1.1 요청 헤더
      - RFC 2068은 HTTP/1.1 프로토콜에 대한 초기 사양을 설명한 문서
    - 문법과 사용 방법
      - Host = "Host" ":" 호스트[":"포트]
    - Host 헤더의 누락
    - Host 헤더 해석하기
    - Host 헤더와 프락시
### 안정적인 웹 사이트 만들기
> 웹 사이트에 장애가 생기는 상황 : 서버 다운, 트래픽 폭증, 네트워크 장애나 손실
- 위와 같은 문제를 예측하고 대응하는 방법
  - 미러링된 서버 팜
    - 서버 팜은 서로 대신할 수 있고 식별할 수 있게 설정된 웹 서버들의 집합
    - 서버 팜의 서버에 있는 콘텐츠들은 한 곳에 문제가 생기변 다른 한 곳에서 대신 전달할 수 있게 미러링할 수 있다.
  - 콘텐츠 분산 네트워크
    - 특정 콘텐츠의 분산을 목적으로 하는 단순한 네트워크
    - 네트워크의 노드 = 서버, 대리 서버, 프락시 서버 등
  - CDN의 대리 캐시
    - 대리캐시는 복제 원 서버를 대신해 사용될 수 있음
    - 대리 서버와 미러링 된 서버의 차이점
      - 대리 서버는 보통 수요에 따라서 동작 한다는 것
      - 대리 서버는 원 서버의 전체 콘텐츠를 복사하지는 않는다.
### 웹 사이트 빠르게 만들기
- 서버팜이나 분산 프락시 캐시나 대리 서버는 흔잡을 조절하고 네트워크 트래픽을 분산시킨다.
- 콘텐츠를 분산시키면， 그 콘텐츠를 사용자에게 더 가깝게 만들어주므로 콘텐츠를 서버에서 클라이언트로의 전송하는 시간이 단축된다.
- 웹 사이트 속도를 높이는 또 다른 접근 방법은 콘텐츠를 인코딩하는 것이다. 예 를 들면， 클라이언트가 받은 압축을 해제할 수 있다는 가정하에， 콘텐츠를 압축하 는 것